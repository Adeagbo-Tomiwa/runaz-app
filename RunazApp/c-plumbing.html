<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Runaz — Plumbing</title>

  <!-- Fonts + Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode:'class',
      theme:{
        extend:{
          colors:{ runaz:{ blue:'#003d87', yellow:'#FFC52E', ink:'#111827' } },
          boxShadow:{ soft:'0 12px 30px rgba(16,24,40,.08)' }
        }
      }
    }
  </script>
  <style>body{font-family:Inter,system-ui}</style>
  <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-50 text-runaz-ink dark:bg-gray-900 dark:text-gray-100">
  <!-- Header -->
  <div id="site-header" class="border-b dark:border-gray-800 bg-white/90 dark:bg-gray-900/80 backdrop-blur sticky top-0 z-40"></div>


  <!-- Hero -->
  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-10 pb-6">
    <nav class="text-sm text-gray-600 dark:text-gray-400"><a href="categories.html" class="hover:text-runaz-blue">Categories</a> / <span>Plumbing</span></nav>
    <div class="mt-3 flex flex-col md:flex-row md:items-end md:justify-between gap-4">
      <div>
        <h1 class="text-3xl font-extrabold flex items-center gap-3">
          <span class="inline-grid place-items-center w-10 h-10 rounded-xl bg-runaz-blue/10">
            <i data-feather="droplet" class="text-runaz-blue"></i>
          </span>
          Plumbing
        </h1>
        <p class="mt-2 text-gray-600 dark:text-gray-300">Fix leaks, install fixtures, unblock drains, and more. Book verified plumbers nearby.</p>
      </div>
      <a href="post.html" class="inline-flex items-center justify-center px-4 py-2 rounded-xl bg-runaz-blue text-white font-semibold">
        <i data-feather="plus" class="mr-2"></i> Post a Request
      </a>
    </div>
  </section>

  <!-- Content -->
  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 grid lg:grid-cols-[280px_1fr] gap-6">
    <!-- Filters (desktop) -->
    <aside class="hidden lg:block rounded-2xl bg-white dark:bg-gray-800 border dark:border-gray-700 p-5 h-fit">
      <h3 class="font-semibold">Filters</h3>
      <div class="mt-4 space-y-4 text-sm">
        <div>
          <label class="block text-xs text-gray-500 dark:text-gray-400 mb-1">Search</label>
          <div class="relative">
            <i data-feather="search" class="w-4 h-4 text-gray-400 absolute left-3 top-2.5"></i>
            <input id="q" class="w-full pl-9 pr-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900 dark:placeholder-gray-400" placeholder="e.g. sink, bathroom">
          </div>
        </div>

        <div>
          <label class="block text-xs text-gray-500 dark:text-gray-400 mb-1">Minimum rating</label>
          <select id="minRating" class="w-full px-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900">
            <option value="0">Any</option>
            <option value="3">3★+</option>
            <option value="4">4★+</option>
            <option value="4.5">4.5★+</option>
          </select>
        </div>

        <div class="flex items-center gap-2">
          <input id="verifiedOnly" type="checkbox" class="accent-runaz-blue">
          <label for="verifiedOnly">Verified only</label>
        </div>

        <div>
          <label class="block text-xs text-gray-500 dark:text-gray-400 mb-1">Max price / hr (₦)</label>
          <input id="maxPrice" type="range" min="3000" max="25000" step="1000" value="25000" class="w-full">
          <div class="text-xs mt-1"><span id="maxPriceOut">₦ 25,000</span></div>
        </div>
      </div>
    </aside>

    <!-- Results -->
    <div>
      <!-- Mobile filter bar -->
      <div class="lg:hidden rounded-2xl bg-white dark:bg-gray-800 border dark:border-gray-700 p-4 mb-4">
        <div class="grid grid-cols-2 gap-3">
          <button id="openFilters" class="px-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900 text-sm flex items-center justify-center gap-2">
            <i data-feather="sliders"></i> Filters
          </button>
          <select id="sort" class="px-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900 text-sm">
            <option value="rating">Sort: Rating</option>
            <option value="price">Sort: Price (low)</option>
            <option value="distance">Sort: Distance</option>
          </select>
        </div>
      </div>

      <!-- Desktop sort -->
      <div class="hidden lg:flex items-center justify-between mb-3">
        <div class="text-sm text-gray-600 dark:text-gray-400"><span id="count">0</span> plumbers</div>
        <div class="flex items-center gap-2">
          <label class="text-sm text-gray-600 dark:text-gray-400">Sort</label>
          <select id="sortDesktop" class="px-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900 text-sm">
            <option value="rating">Rating</option>
            <option value="price">Price (low)</option>
            <option value="distance">Distance</option>
          </select>
        </div>
      </div>

      <!-- Cards -->
      <div id="list" class="grid md:grid-cols-2 gap-4"></div>

      <!-- Empty -->
      <div id="empty" class="hidden mt-8 rounded-2xl border dark:border-gray-700 bg-white dark:bg-gray-800 p-8 text-center">
        <div class="mx-auto w-12 h-12 rounded-full bg-runaz-blue/10 grid place-items-center">
          <i data-feather="filter"></i>
        </div>
        <h3 class="mt-3 font-semibold">No matches found</h3>
        <p class="text-sm text-gray-600 dark:text-gray-400">Try widening your filters or search.</p>
      </div>

      <!-- CTA -->
      <div class="mt-8 rounded-3xl bg-runaz-blue text-white p-8 flex flex-col md:flex-row gap-6 items-start md:items-center justify-between">
        <div>
          <h3 class="text-2xl font-bold">Need something specific?</h3>
          <p class="text-white/80 mt-1">Post a request and let vetted plumbers reach out with offers.</p>
        </div>
        <a href="post.html" class="px-5 py-3 rounded-xl bg-white text-runaz-blue font-semibold">Post a Request</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-10 border-t bg-white dark:bg-gray-900 dark:border-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-sm text-gray-600 dark:text-gray-400 flex flex-col md:flex-row gap-2 md:items-center md:justify-between">
      <p>© 2025 Runaz. All rights reserved.</p>
      <div class="flex gap-4">
        <a href="#" class="hover:text-runaz-blue">Terms</a>
        <a href="#" class="hover:text-runaz-blue">Privacy</a>
        <a href="#" class="hover:text-runaz-blue">Support</a>
      </div>
    </div>
  </footer>

  <!-- Header + Page logic -->
  <script src="/scripts/header.js"></script>
  <script>
    // Mount header
    RunazHeader.init({
      active:'categories',
      logoSrc:'/assets/runaz-logo.png',
      homeUrl:'index.html',
      links:[
        { key:'how',        label:'How it works', href:'#how' },
        { key:'categories', label:'Categories',   href:'categories.html' },
        { key:'trust',      label:'Why Runaz',    href:'about.html' },
        { key:'faq',        label:'FAQ',          href:'faq.html' }
      ]
    });

    // Mock data: list of plumbers
    const RUNNERS = [
      { id:1, name:'Adeyemi Plumbing Works', rating:4.7, reviews:124, price:8000, distance:2.1, verified:true, kyc:true, skills:['Leak fix','WC install','Heaters'], area:'Igbogbo' },
      { id:2, name:'Ikorodu Drain Masters',  rating:4.4, reviews:89,  price:6500, distance:3.5, verified:false, kyc:true, skills:['Unblock drain','Kitchen sink'], area:'Ikorodu Garage' },
      { id:3, name:'Prime Pipe Pros',        rating:4.9, reviews:201, price:12000, distance:1.3, verified:true, kyc:true, skills:['Bathroom remodel','PPR piping'], area:'Owode' },
      { id:4, name:'SwiftFlow Plumbing',     rating:4.2, reviews:56,  price:5000, distance:5.6, verified:false, kyc:false, skills:['Tap change','Leak detect'], area:'Ibeshe' },
      { id:5, name:'BlueDrop Engineers',     rating:4.6, reviews:73,  price:9000, distance:2.9, verified:true, kyc:true, skills:['Borehole','Water tank'], area:'Bayeku' },
      { id:6, name:'RapidFix Plumbers',      rating:4.5, reviews:48,  price:7000, distance:4.0, verified:true, kyc:false, skills:['Shower','Waste line'], area:'Igbogbo' },
    ];

    // Elements
    const q = document.getElementById('q');
    const minRating = document.getElementById('minRating');
    const verifiedOnly = document.getElementById('verifiedOnly');
    const maxPrice = document.getElementById('maxPrice');
    const maxPriceOut = document.getElementById('maxPriceOut');
    const sort = document.getElementById('sort');
    const sortDesktop = document.getElementById('sortDesktop');
    const list = document.getElementById('list');
    const empty = document.getElementById('empty');
    const count = document.getElementById('count');
    const openFilters = document.getElementById('openFilters');

    let state = { q:'', minRating:0, verified:false, maxPrice:25000, sort:'rating' };

    // Mobile filter drawer (simple modal)
    openFilters?.addEventListener('click', () => {
      const panel = document.createElement('div');
      panel.innerHTML = `
        <div class="fixed inset-0 z-50">
          <div class="absolute inset-0 bg-black/30"></div>
          <div class="absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-900 rounded-t-2xl p-5 border-t dark:border-gray-700">
            <div class="flex items-center justify-between">
              <h3 class="font-semibold">Filters</h3>
              <button id="closeDrawer" class="p-2 rounded-lg border dark:border-gray-700">Close</button>
            </div>
            <div class="mt-4 space-y-4 text-sm">
              <div>
                <label class="block text-xs text-gray-500 dark:text-gray-400 mb-1">Search</label>
                <input id="q_m" class="w-full px-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900" placeholder="e.g. sink, bathroom" value="${state.q}">
              </div>
              <div>
                <label class="block text-xs text-gray-500 dark:text-gray-400 mb-1">Minimum rating</label>
                <select id="minRating_m" class="w-full px-3 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-900">
                  <option value="0">Any</option>
                  <option value="3">3★+</option>
                  <option value="4">4★+</option>
                  <option value="4.5">4.5★+</option>
                </select>
              </div>
              <div class="flex items-center gap-2">
                <input id="verifiedOnly_m" type="checkbox" class="accent-runaz-blue" ${state.verified?'checked':''}>
                <label>Verified only</label>
              </div>
              <div>
                <label class="block text-xs text-gray-500 dark:text-gray-400 mb-1">Max price / hr (₦)</label>
                <input id="maxPrice_m" type="range" min="3000" max="25000" step="1000" value="${state.maxPrice}" class="w-full">
              </div>
              <button id="applyFilters" class="w-full mt-2 px-4 py-2 rounded-xl bg-runaz-blue text-white font-semibold">Apply</button>
            </div>
          </div>
        </div>`;
      document.body.appendChild(panel);

      panel.querySelector('#minRating_m').value = String(state.minRating);

      panel.querySelector('#closeDrawer').addEventListener('click', ()=> panel.remove());
      panel.querySelector('#applyFilters').addEventListener('click', ()=>{
        state.q = panel.querySelector('#q_m').value.trim();
        state.minRating = parseFloat(panel.querySelector('#minRating_m').value);
        state.verified = panel.querySelector('#verifiedOnly_m').checked;
        state.maxPrice = parseInt(panel.querySelector('#maxPrice_m').value,10);
        render();
        panel.remove();
      });
    });

    // Controls
    q?.addEventListener('input', e => { state.q = e.target.value.trim(); render(); });
    minRating?.addEventListener('change', e => { state.minRating = parseFloat(e.target.value); render(); });
    verifiedOnly?.addEventListener('change', e => { state.verified = e.target.checked; render(); });
    maxPrice?.addEventListener('input', e => {
      state.maxPrice = parseInt(e.target.value,10);
      maxPriceOut.textContent = '₦ ' + state.maxPrice.toLocaleString();
      render();
    });
    sort?.addEventListener('change', e => { state.sort = e.target.value; syncSort(); render(); });
    sortDesktop?.addEventListener('change', e => { state.sort = e.target.value; syncSort(); render(); });

    function syncSort(){
      if(sort) sort.value = state.sort;
      if(sortDesktop) sortDesktop.value = state.sort;
    }

    function stars(n){
      const full = Math.floor(n);
      const half = n - full >= 0.5;
      let s = '';
      for(let i=0;i<full;i++) s += '<i data-feather="star" class="w-4 h-4 text-yellow-500 inline"></i>';
      if(half) s += '<i data-feather="star" class="w-4 h-4 text-yellow-500 inline opacity-60"></i>';
      const empty = 5 - full - (half?1:0);
      for(let i=0;i<empty;i++) s += '<i data-feather="star" class="w-4 h-4 text-gray-300 dark:text-gray-600 inline"></i>';
      return s;
    }

    function render(){
      // filter
      let data = RUNNERS.slice();
      if(state.q){
        const q = state.q.toLowerCase();
        data = data.filter(r => r.name.toLowerCase().includes(q) || r.skills.join(' ').toLowerCase().includes(q) || r.area.toLowerCase().includes(q));
      }
      if(state.minRating>0) data = data.filter(r => r.rating >= state.minRating);
      if(state.verified) data = data.filter(r => r.verified);
      data = data.filter(r => r.price <= state.maxPrice);

      // sort
      if(state.sort==='price') data.sort((a,b)=> a.price - b.price);
      else if(state.sort==='distance') data.sort((a,b)=> a.distance - b.distance);
      else data.sort((a,b)=> b.rating - a.rating); // rating default

      // render
      count.textContent = data.length;
      if(!data.length){ list.innerHTML=''; empty.classList.remove('hidden'); return; }
      empty.classList.add('hidden');
      list.innerHTML = data.map(r => `
        <div class="rounded-2xl bg-white dark:bg-gray-800 border dark:border-gray-700 p-5 hover:shadow-soft transition">
          <div class="flex items-start justify-between gap-3">
            <div class="flex items-center gap-3">
              <img class="w-12 h-12 rounded-full" src="https://i.pravatar.cc/100?u=${r.id}" alt="${r.name}">
              <div>
                <div class="font-semibold">${r.name} ${r.verified ? '<span class="ml-2 text-xs px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700 align-middle">Verified</span>' : ''}</div>
                <div class="text-sm text-gray-600 dark:text-gray-300">${r.area} · <span class="inline-flex items-center gap-1 align-middle">${stars(r.rating)}<span class="ml-1">${r.rating.toFixed(1)}</span> <span class="text-gray-400">(${r.reviews})</span></span></div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-lg font-extrabold">₦ ${r.price.toLocaleString()}<span class="text-sm font-medium text-gray-500">/hr</span></div>
              <div class="text-xs text-gray-500">${r.distance} km away</div>
            </div>
          </div>
          <p class="mt-3 text-sm text-gray-700 dark:text-gray-300">Skills: ${r.skills.join(', ')}</p>
          <div class="mt-4 flex items-center gap-3">
            <button class="px-3 py-2 rounded-lg border dark:border-gray-700">Message</button>
            <button class="px-3 py-2 rounded-lg bg-runaz-yellow text-runaz-ink font-semibold">Make Offer</button>
            ${r.kyc ? '<span class="ml-auto text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700">KYC</span>' : ''}
          </div>
        </div>
      `).join('');
      if(window.feather) feather.replace();
    }

    // initial
    syncSort();
    render();
  </script>
</body>
</html>